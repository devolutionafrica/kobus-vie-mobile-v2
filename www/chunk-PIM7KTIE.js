import{a as oe,b as ie}from"./chunk-FPJSHQDL.js";import"./chunk-WM3OINT3.js";import{a as te}from"./chunk-ZDD32THL.js";import{c as Y,f as X,g as Z}from"./chunk-VZ7FIHC4.js";import{a as y,b as x}from"./chunk-SCHSRBL4.js";import"./chunk-RZAGQDL7.js";import{c as ee}from"./chunk-G7VNZEIO.js";import"./chunk-VR2CFWHV.js";import"./chunk-RFL24BSP.js";import"./chunk-KWB7PMGW.js";import"./chunk-OFHKS6HF.js";import"./chunk-HC6MZPB3.js";import"./chunk-4QCDUIMV.js";import"./chunk-HKXQTFAF.js";import"./chunk-3H72FJST.js";import"./chunk-HKIPULFU.js";import"./chunk-I5V6RRU4.js";import"./chunk-2XCOQZX7.js";import"./chunk-MCRJI3T3.js";import"./chunk-YXIH4HW3.js";import"./chunk-MBDWPRLC.js";import"./chunk-RTD7OIC3.js";import"./chunk-MJBR6MFX.js";import"./chunk-5OMUW5VI.js";import"./chunk-OBXDPQ3V.js";import{a as v}from"./chunk-6T2OUF7B.js";import"./chunk-W6C75AC7.js";import{h as $}from"./chunk-MYCPTFMV.js";import"./chunk-LCZUZPJB.js";import{a as Q}from"./chunk-T3DK3MTE.js";import{c as u,g as W}from"./chunk-YZR4O2H4.js";import{$c as H,Ba as M,Fb as N,Ga as E,Hb as A,La as l,Pb as b,Ra as e,Sa as t,Ta as g,Wc as q,Xa as _,Xc as B,Y as f,Z as w,Za as h,_a as P,_b as F,hd as L,ib as s,ic as V,jc as O,nc as U,ob as T,oc as R,pc as D,qb as k,sc as j,sd as J,tc as z,td as K,ua as c,uc as G,ya as d}from"./chunk-R3JMOR4V.js";import"./chunk-WIBX65JJ.js";import"./chunk-T7W34IF5.js";import"./chunk-U2BULWNC.js";import"./chunk-QP63OKL4.js";import"./chunk-WOMEDVA5.js";import"./chunk-YHK2ZB7J.js";import"./chunk-4U6PRYVA.js";import"./chunk-U4MOEAPB.js";import"./chunk-JWIEPCRG.js";import"./chunk-C5RQ2IC2.js";import"./chunk-D4VGNZLR.js";import"./chunk-JHLW7V75.js";import"./chunk-SV7S5NYR.js";import"./chunk-LNJ3S2LQ.js";var ne=n=>({"ios-header":n});function re(n,a){if(n&1){let m=_();e(0,"ion-icon",17),h("click",function(){f(m);let o=P();return w(o.firstInputToggleShow())}),t()}}function se(n,a){if(n&1){let m=_();e(0,"ion-icon",18),h("click",function(){f(m);let o=P();return w(o.firstInputToggleShow())}),t()}}function ae(n,a){if(n&1){let m=_();e(0,"ion-icon",17),h("click",function(){f(m);let o=P();return w(o.secondInputToggleShow())}),t()}}function le(n,a){if(n&1){let m=_();e(0,"ion-icon",18),h("click",function(){f(m);let o=P();return w(o.secondInputToggleShow())}),t()}}var Ae=(()=>{let a=class a{constructor(r,o,i,p,C,S,I){this.route=r,this.store=o,this.platform=i,this.spinner=p,this.authService=C,this.profilService=S,this._session=I,this.hostname=this.store.storeValue(u.APP_CONFIG).hostname,this.platformValue=i.getPlatform()}ionViewWillEnter(){this.updateFormPassword.valid&&this.lastPassword.value===this.newPassword.value?this.formInvalid=!1:this.formInvalid=!0}ngOnInit(){this.formInvalid=!1,this.firstShowPassword=!1,this.secondShowPassword=!1,this.firstInputType="password",this.secondInputType="password",this.updateFormPassword=new Y().buildForm(),this.newPassword.valueChanges.subscribe(r=>{this.updateFormPassword.valid&&this.lastPassword.value===r?this.formInvalid=!1:this.formInvalid=!0})}get contact(){return this.updateFormPassword.get("contact")}get newPassword(){return this.updateFormPassword.get("newPassword")}get emailAdress(){return this.updateFormPassword.get("emailAdress")}get lastPassword(){return this.updateFormPassword.get("lastPassword")}firstInputToggleShow(){this.firstShowPassword=!this.firstShowPassword,this.firstInputType=this.firstShowPassword?"text":"password"}secondInputToggleShow(){this.secondShowPassword=!this.secondShowPassword,this.secondInputType=this.secondShowPassword?"text":"password"}updateAccountPassword(){this.spinner.show();let r=this._session.storeValue(u.CURRENT_ACCES);console.log("currentAuthUser :::> ",r);let o={Login:r.username,NouveauPassword:this.newPassword.value,EMAIL:this.emailAdress.value,Telephone:this.contact.value};this.authService.createNewPassword(o).then(i=>{if(i.Statut===200){let p=this._session.storeValue(u.AUTH),C={Filliale:p.codeFiliale,NumeroClient:p.clientNumber};this.profilService.loadUserProfil(C).then(S=>{this.spinner.hide(),p.isFirstConnexion=!1;let I=S.toJson();this._session.dispatch(u.AUTH,p),this._session.dispatch(u.CURRENT_USER,I),x.show("","Bravo, votre mot de passe \xE0 bien \xE9t\xE9 mise \xE0 jour",y.success).then(ce=>{this._session.dispatch(u.CURRENT_ACCES,{}),this.route.navigate(["/dashboard"])})})}else this.spinner.hide(),x.show("Erreur de mise \xE0 jour",i.Message,y.error)})}};a.\u0275fac=function(o){return new(o||a)(d(F),d(W),d(ee),d($),d(v),d(te),d(Q))},a.\u0275cmp=M({type:a,selectors:[["app-change-default-password"]],features:[T([v])],decls:46,vars:11,consts:[["fullscreen","true",3,"ngClass"],[3,"formGroup"],["id","chang_password_box",1,"ion-padding"],["size","12",1,"ion-margin-top"],["size","12"],["color","dark","slot","start","name","call-outline"],["required","true","formControlName","contact","color","dark","type","text","placeholder","Numero de t\xE9l\xE9phone"],["color","dark","slot","start","name","mail-outline"],["required","true","formControlName","emailAdress","color","dark","type","email","placeholder","Adresse Email"],["color","dark","slot","start","name","key-outline"],["required","true","formControlName","lastPassword","color","dark","placeholder","Nouveau mot de passe",3,"type"],["color","dark","slot","end","name","eye-outline",3,"click",4,"ngIf"],["color","dark","slot","end","name","eye-off-outline",3,"click",4,"ngIf"],["required","true","formControlName","newPassword","color","dark","placeholder","Confirmation du mot de passe",3,"type"],["mat-flat-button","",3,"click","disabled"],[2,"color","var(--ion-color-white)"],[1,"ion-padding"],["color","dark","slot","end","name","eye-outline",3,"click"],["color","dark","slot","end","name","eye-off-outline",3,"click"]],template:function(o,i){o&1&&(e(0,"ion-content",0)(1,"form",1)(2,"ion-row",2)(3,"ion-col",3)(4,"h2"),s(5,"Modification du mot de passe"),t(),e(6,"span"),s(7," Pour garantir la s\xE9curit\xE9 de votre compte vous devez imperativement changer votre mot de passe par d\xE9faut. "),t()(),e(8,"ion-col",4)(9,"p"),s(10,"Num\xE9ro de t\xE9l\xE9phone"),t(),e(11,"ion-item"),g(12,"ion-icon",5)(13,"ion-input",6),t()(),e(14,"ion-col",4)(15,"p"),s(16,"Adresse email"),t(),e(17,"ion-item"),g(18,"ion-icon",7)(19,"ion-input",8),t()(),e(20,"ion-col",4)(21,"p"),s(22,"Nouveau mot de passe"),t(),e(23,"span"),s(24," Votre mot de passe doit \xEAtre un mot de passe du type fort. Exemple de mot de passe fort "),e(25,"i"),s(26,"Nsi@Ch@pCh@p"),t()(),e(27,"ion-item"),g(28,"ion-icon",9)(29,"ion-input",10),E(30,re,1,0,"ion-icon",11)(31,se,1,0,"ion-icon",12),t()(),e(32,"ion-col",4)(33,"p"),s(34,"Confirmation du mot de passe"),t(),e(35,"ion-item"),g(36,"ion-icon",9)(37,"ion-input",13),E(38,ae,1,0,"ion-icon",11)(39,le,1,0,"ion-icon",12),t()(),e(40,"ion-col",4)(41,"button",14),h("click",function(){return i.updateAccountPassword()}),e(42,"mat-icon",15),s(43,"done"),t(),e(44,"span",16),s(45,"Modifier maintenant"),t()()()()()()),o&2&&(l("ngClass",k(9,ne,i.platformValue==="ios")),c(),l("formGroup",i.updateFormPassword),c(28),l("type",i.firstInputType),c(),l("ngIf",!i.firstShowPassword),c(),l("ngIf",i.firstShowPassword),c(6),l("type",i.secondInputType),c(),l("ngIf",!i.secondShowPassword),c(),l("ngIf",i.secondShowPassword),c(2),l("disabled",i.formInvalid))},dependencies:[b,N,A,z,U,V,O,j,G,R,D,B,L,q,H,J,K,ie,oe,Z,X],styles:["ion-content[_ngcontent-%COMP%]{--padding-bottom: 9rem}button[_ngcontent-%COMP%]{width:100%;padding:3.5px;margin-top:15px;background-color:var(--ion-color-secondary)}button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 5px;font-size:1rem;font-weight:200;color:var(--ion-color-white)}ion-input[_ngcontent-%COMP%]{font-size:1rem!important;font-weight:200!important}mat-icon[_ngcontent-%COMP%]{color:var(--ion-color-white)}#chang_password_box[_ngcontent-%COMP%]{margin-top:5%;padding:0 10%}#chang_password_box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:8px;font-size:1rem;font-weight:200}h2[_ngcontent-%COMP%]{color:var(--ion-color-secondary);font-size:1.4rem;font-weight:300}span[_ngcontent-%COMP%]{font-size:.85rem;font-weight:200;text-align:center!important;color:var(--ion-color-step-600, #60646b)}ion-col[_ngcontent-%COMP%]{margin-bottom:.8rem}  .swal2-container{padding:10%}.ios-header[_ngcontent-%COMP%]{padding-top:1.4rem!important}"]});let n=a;return n})();export{Ae as ChangeDefaultPasswordPage};
