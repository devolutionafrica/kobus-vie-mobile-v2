import{a as T}from"./chunk-X74HZUK6.js";import{a as u}from"./chunk-LCZUZPJB.js";import{a as P}from"./chunk-T3DK3MTE.js";import{c as s,g as p}from"./chunk-YZR4O2H4.js";import{N as a,Q as n,d as c}from"./chunk-R3JMOR4V.js";import{h}from"./chunk-LNJ3S2LQ.js";var g=class{static build(e){let o=e;return o!=null?new T(o.status,o.step):null}};var N=(()=>{let e=class e{constructor(t,r){this._session=t,this._store=r;let d=g.build(this._store.storeValue("configApp"));this.appConfigSubject=new c(d)}cleanConfig(){this._store.dispatch("configApp",null),this.appConfigSubject.next(null)}saveConfig(t){let r=t!==null?t.json():null;return this.appConfigSubject.next(t),this._store.dispatch("configApp",r),this.appConfigSubject}updateConfig(t){return this.saveConfig(t)}loadConfig(){return this.appConfigSubject}createStoreInitValue(){this._session.dispatch(s.AUTH,null),this._store.dispatch(s.APP_CONFIG,{}),this._session.dispatch(s.PROPOSITIONS,[]),this._session.dispatch(s.CONTRATS,[]),this._store.dispatch(s.FILIALE,null),this._store.dispatch(s.CONFIG_STEP,{}),this._store.dispatch(s.LANGUAGE,null)}};e.\u0275fac=function(r){return new(r||e)(n(P),n(p))},e.\u0275prov=a({token:e,factory:e.\u0275fac});let i=e;return i})();var G=(()=>{let e=class e{constructor(t){this.extranetAPI=t}getAgences(){return this.extranetAPI.listAgence().then(t=>t.Agences)}};e.\u0275fac=function(r){return new(r||e)(n(u))},e.\u0275prov=a({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var b=class{constructor(e,o,t,r){this._id=e,this._libelle=o,this._codePeriodicite=t,this._identifiant=r}};var S=class{static build(e){return new b(e.Id,e.Libelle,e.CodePeriodicite,e.Identifiant)}};var A=class{constructor(e,o){if(this.store=e,this.appConfigAPI=o,this.message="",this.periodiciteProduit=[],this.store.storeValue(s.APP_CONFIG)){let t=this.store.storeValue(s.APP_CONFIG);this.periodiciteProduit=t.periodicityList?this.store.storeValue(s.APP_CONFIG).periodicityList:[]}this.periodiciteBehaviorSubject=new c(this.periodiciteProduit)}loadPeriodicites(){return h(this,null,function*(){return yield this.appConfigAPI.listPeriodicity().then(e=>(this.generatePeriodiciteList(e),this.updateBehaviorSubject(),this.periodiciteProduit))})}updateBehaviorSubject(){this.periodiciteBehaviorSubject.next(this.periodiciteProduit)}generatePeriodiciteList(e){for(let o of e)this.createEndPushPeriodiciteInstance(o)}createEndPushPeriodiciteInstance(e){this.periodiciteProduit.push(S.build(e))}};var L=(()=>{let e=class e extends A{constructor(t,r){super(t,r)}getPeriodicites(){return this.loadPeriodicites()}};e.\u0275fac=function(r){return new(r||e)(n(p),n(u))},e.\u0275prov=a({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var C=class{constructor(e,o,t){this._id=e,this._identifiant=o,this._libelle=t}};var y=class{static build(e){return new C(e.Id,e.Identifiant,e.Libelle)}};var v=class{constructor(e,o){if(this.store=e,this.appConfigAPI=o,this.message="",this.modeReglement=[],this.store.storeValue(s.APP_CONFIG)){let t=this.store.storeValue(s.APP_CONFIG);this.modeReglement=t.modePayList?this.store.storeValue(s.APP_CONFIG).modePayList:[]}this.modeReglementBehaviorSubject=new c(this.modeReglement)}loadModeReglement(){return h(this,null,function*(){return this.modeReglement=[],yield this.appConfigAPI.listModeReglement().then(e=>(this.generateModeReglementList(e),this.updateBehaviorSubject(),this.modeReglement))})}updateBehaviorSubject(){this.modeReglementBehaviorSubject.next(this.modeReglement)}generateModeReglementList(e){for(let o of e.ModeReglements)console.log("mode de reglement :::> ",o),o.Identifiant!=="E"&&this.createEndPushModeReglementInstance(o)}createEndPushModeReglementInstance(e){this.modeReglement.push(y.build(e))}};var M=(()=>{let e=class e extends v{constructor(t,r){super(t,r)}getModeReglement(){return this.loadModeReglement()}};e.\u0275fac=function(r){return new(r||e)(n(p),n(u))},e.\u0275prov=a({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var O=class{constructor(e,o,t,r,d,l){this._codeOperateur=e,this._codePays=o,this._indicatifPays=t,this._needOTP=r,this._pays=d,this._operateur=l}toJson(){return{codeOperateur:this._codeOperateur,codePays:this._codePays,indicatifPays:this._indicatifPays,needOTP:this._needOTP,pays:this._pays,operateur:this._operateur}}};var j=class{static build(e){return new O(e.CodeOperateur,e.CodePays,e.IndicatifPays,e.NeedOTP,e.Pays,e.operateur)}};var _=class{constructor(e,o){if(this.store=e,this.appConfigAPI=o,this.message="",this.store.storeValue(s.APP_CONFIG)){let t=this.store.storeValue(s.APP_CONFIG);this.operateurMobiles=t.operators?this.store.storeValue(s.APP_CONFIG).operators:[]}else this.operateurMobiles=[];this.operateurMobileBehaviorSubject=new c(this.operateurMobiles)}loadMobilOperators(){return h(this,null,function*(){let o={Filliale:this.store.storeValue(s.FILIALE).codeFiliale};return yield this.appConfigAPI.listMobileOperator(o).then(t=>(this.generateOperatorList(t),this.updateBehaviorSubject(),this.operateurMobiles))})}updateBehaviorSubject(){this.operateurMobileBehaviorSubject.next(this.operateurMobiles)}generateOperatorList(e){this.operateurMobiles=[];for(let o of e)this.createEndPushOperatorInstance(o)}createEndPushOperatorInstance(e){this.operateurMobiles.push(j.build(e))}cleanStorageOperator(){let e=this.store.storeValue(s.APP_CONFIG);e.operators=[],this.store.dispatch(s.APP_CONFIG,e)}};var w=(()=>{let e=class e extends _{constructor(t,r){super(t,r)}getOperatorMobilList(){return this.loadMobilOperators()}cleanOperatorList(){this.cleanStorageOperator()}};e.\u0275fac=function(r){return new(r||e)(n(p),n(u))},e.\u0275prov=a({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var E=class{constructor(e,o,t,r){this._id=e,this._identifiant=o,this._jourDelaiPrestation=t,this._libelle=r}};var F=class{static build(e){return new E(e.Id,e.Identifiant,e.JourDelaiPrestation,e.Libelle)}};var x=class{constructor(e,o){if(this.store=e,this.appConfigAPI=o,this.message="",this.typeDemandePrestation=[],this.store.storeValue(s.APP_CONFIG)){let t=this.store.storeValue(s.APP_CONFIG);this.typeDemandePrestation=t.operators?this.store.storeValue(s.APP_CONFIG).operators:[]}this.typeDemandePrestationBehaviorSubject=new c(this.typeDemandePrestation)}loadTypeDemandePrestation(){return h(this,null,function*(){return yield this.appConfigAPI.listModePrestation().then(e=>(this.generateTypeDemandesPrestationList(e),this.updateBehaviorSubject(),this.typeDemandePrestation))})}updateBehaviorSubject(){this.typeDemandePrestationBehaviorSubject.next(this.typeDemandePrestation)}generateTypeDemandesPrestationList(e){for(let o of e.DemandesPrestationsTypes)this.createEndPushTypeDemandesPrestationInstance(o)}createEndPushTypeDemandesPrestationInstance(e){this.typeDemandePrestation.push(F.build(e))}};var B=(()=>{let e=class e extends x{constructor(t,r){super(t,r)}getTypeDemandePrestations(){return this.loadTypeDemandePrestation()}};e.\u0275fac=function(r){return new(r||e)(n(p),n(u))},e.\u0275prov=a({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var Be=(()=>{let e=class e extends N{constructor(t,r,d,l,R,V,D){super(r,t),this.store=t,this.session=r,this.agenceService=d,this.periodiciteService=l,this.modeReglementService=R,this.mobilOperatorService=V,this.typeDemandePrestationService=D,this.appConfig=this.store.storeValue(s.APP_CONFIG),this.currentAppConfigSubject=new c(this.appConfig)}lunchInitProcess(){return h(this,null,function*(){return yield this.periodiciteService.getPeriodicites().then(t=>this.modeReglementService.getModeReglement().then(r=>this.typeDemandePrestationService.getTypeDemandePrestations().then(d=>this.agenceService.getAgences().then(l=>({agences:l,operators:this.mobilOperatorService,modePayList:r,periodicityList:t,typePrestationList:d})))))})}cleanSetpConfig(){return this.cleanConfig()}saveSetpConfig(t){return this.saveConfig(t)}updateSetpConfig(t){return this.updateConfig(t)}loadSetpConfig(){return this.loadConfig()}setAppConfig(t){this.currentAppConfigSubject.next(t),this.store.dispatch("appConfig",t)}getAppConfig(){return this.currentAppConfigSubject.value}};e.\u0275fac=function(r){return new(r||e)(n(p),n(P),n(G),n(L),n(M),n(w),n(B))},e.\u0275prov=a({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();export{g as a,w as b,Be as c};
